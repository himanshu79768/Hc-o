<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My PWA with Notifications</title>
    <link rel="manifest" href="manifest.json">
    <link rel="icon" href="https://s3.ezgif.com/tmp/ezgif-3-092ebae015.png" type="image/png">
</head>
<body>
    <h1>Welcome to My PWA</h1>
    <p>This is a Progressive Web App with push notifications.</p>
    <button id="doneButton">Done</button>

    <script>
        // Register the service worker
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('service-worker.js')
                    .then(registration => {
                        console.log('Service Worker registered successfully:', registration.scope);
                        initializePushNotifications(registration);
                    })
                    .catch(error => {
                        console.log('Service Worker registration failed:', error);
                    });
            });
        }

        function initializePushNotifications(registration) {
            const doneButton = document.getElementById('doneButton');
            doneButton.addEventListener('click', () => {
                Notification.requestPermission().then(permission => {
                    if (permission === 'granted') {
                        setTimeout(() => {
                            registration.showNotification('Task Completed', {
                                body: 'Your task has been completed successfully!',
                                icon: 'icon.png'
                            });
                        }, 10000); // 10 seconds delay
                    }
                });
            });
        }
    </script>
</body>
</html>
